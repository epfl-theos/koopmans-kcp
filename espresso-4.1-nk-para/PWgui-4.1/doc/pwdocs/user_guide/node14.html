<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>3 Running on parallel machines</TITLE>
<META NAME="description" CONTENT="3 Running on parallel machines">
<META NAME="keywords" CONTENT="user_guide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="user_guide.css">

<LINK REL="next" HREF="node17.html">
<LINK REL="previous" HREF="node7.html">
<LINK REL="up" HREF="user_guide.html">
<LINK REL="next" HREF="node15.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html466"
  HREF="node15.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.gif"></A> 
<A NAME="tex2html462"
  HREF="user_guide.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.gif"></A> 
<A NAME="tex2html456"
  HREF="node13.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.gif"></A> 
<A NAME="tex2html464"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html467"
  HREF="node15.html">3.1 Understanding Parallelism in</A>
<B> Up:</B> <A NAME="tex2html463"
  HREF="user_guide.html">User's Guide for Quantum-ESPRESSO</A>
<B> Previous:</B> <A NAME="tex2html457"
  HREF="node13.html">2.6 Installation tricks and</A>
   <B>  <A NAME="tex2html465"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00040000000000000000">
3 Running on parallel machines</A>
</H1>

<P>
Parallel execution is strongly system- and installation-dependent. Typically
one has to specify:

<OL>
<LI>a launcher program, such as poe, mpirun, mpiexec, with or
  without  appropriate options 
</LI>
<LI>the number of processors, typically as an option to the launcher
  program,  but in some cases to be specified after the program to be
  executed; 
</LI>
<LI>the program to be executed, with the proper path if needed: for
  instance, pw.x, or ./pw.x, or $HOME/bin/pw.x, or whatever applies; 
</LI>
<LI>other Q<SMALL>UANTUM </SMALL>ESPRESSO-specific parallelization options, to be
  read and interpreted by the running code: 

<UL>
<LI>the number of ``pools'' into which processors are to be grouped
  (pw.x only);
</LI>
<LI>the number of ``task groups'' into which processors are to be
  grouped;
</LI>
<LI>the number of ``images'' used by NEB calculations;
</LI>
<LI>the number of processors performing iterative diagonalization
  (for pw.x) or orthonormalization (for cp.x).
</LI>
</UL>
</LI>
</OL>
Items 1) and 2) are machine- and installation-dependent, and may be 
different for interactive and batch execution. Note that large
parallel machines are  often  configured so as to disallow interactive
execution: if in doubt, ask your system administrator.
Item 3) also depend on your specific configuration (shell, execution
path, etc). 
Item 4) is optional: see section ''Understanding Parallelism''
for the meaning of the various options.

<P>
For illustration, here is how to run pw.x on 16 processors partitioned into
8 pools (2 processors each), for several typical cases. For convenience, we
also give the corresponding values of PARA_ PREFIX, PARA_POSTFIX to
be used in running the examples distributed with Q<SMALL>UANTUM </SMALL>ESPRESSO (see
section ''Run examples''.

<P>
IBM SP machines, batch:
<PRE>
   pw.x -npool 8 &lt; input
   PARA_PREFIX="", PARA_POSTFIX="-npool 8"
</PRE>
This should also work interactively, with environment variables NPROC
set to 16, MP HOSTFILE set to the file containing a list of processors.

<P>
IBM SP machines, interactive, using poe:
<PRE>
   poe pw.x -procs 16 -npool 8 &lt; input
   PARA_PREFIX="poe", PARA_POSTFIX="-procs 16 -npool 8"
</PRE>
PC clusters using mpiexec:
<PRE>
   mpiexec -n 16 pw.x -npool 8 &lt; input
   PARA_PREFIX="mpiexec -n 16", PARA_POSTFIX="-npool 8"
</PRE>
SGI Altix and PC clusters using mpirun:
<PRE>   mpirun -np 16 pw.x -npool 8 &lt; input
   PARA_PREFIX="mpirun -np 16", PARA_POSTFIX="-npool 8"
</PRE>
IBM BlueGene using mpirun:
 <PRE>
  mpirun -np 16 -exe /path/to/executable/pw.x -args "-npool 8" \
    -in /path/to/input -cwd /path/to/work/directory
</PRE>

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html468"
  HREF="node15.html">3.1 Understanding Parallelism in Q<SMALL>UANTUM </SMALL>ESPRESSO</A>
<UL>
<LI><A NAME="tex2html469"
  HREF="node15.html#SECTION00041010000000000000">3.1.0.1 Massively parallel calculations</A>
</UL>
<BR>
<LI><A NAME="tex2html470"
  HREF="node16.html">3.2 Tricks and problems</A>
<UL>
<LI><A NAME="tex2html471"
  HREF="node16.html#SECTION00042010000000000000">3.2.0.1 Trouble with MKL and OpenMP parallelization</A>
<LI><A NAME="tex2html472"
  HREF="node16.html#SECTION00042020000000000000">3.2.0.2 Trouble with compilers and MPI libraries</A>
<LI><A NAME="tex2html473"
  HREF="node16.html#SECTION00042030000000000000">3.2.0.3 Understanding parallel I/O</A>
<LI><A NAME="tex2html474"
  HREF="node16.html#SECTION00042040000000000000">3.2.0.4 Trouble with input files</A>
<LI><A NAME="tex2html475"
  HREF="node16.html#SECTION00042050000000000000">3.2.0.5 Cray XT3</A>
</UL></UL>
<!--End of Table of Child-Links-->
<HR>
<!--Navigation Panel-->
<A NAME="tex2html466"
  HREF="node15.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.gif"></A> 
<A NAME="tex2html462"
  HREF="user_guide.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.gif"></A> 
<A NAME="tex2html456"
  HREF="node13.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.gif"></A> 
<A NAME="tex2html464"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html467"
  HREF="node15.html">3.1 Understanding Parallelism in</A>
<B> Up:</B> <A NAME="tex2html463"
  HREF="user_guide.html">User's Guide for Quantum-ESPRESSO</A>
<B> Previous:</B> <A NAME="tex2html457"
  HREF="node13.html">2.6 Installation tricks and</A>
   <B>  <A NAME="tex2html465"
  HREF="node1.html">Contents</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
Paolo Giannozzi
2009-07-19
</ADDRESS>
</BODY>
</HTML>
